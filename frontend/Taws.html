<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web de Favores</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* Usar la fuente Inter como en el dise帽o original */
    body {
      font-family: "Inter", sans-serif;
    }

    /* Definiciones manuales para las animaciones de tailwindcss-animate */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes zoomIn95 {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes slideInFromLeft {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideInFromBottom4 {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-in {
      animation-duration: 150ms;
      animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    .fade-in { animation-name: fadeIn; }
    .zoom-in-95 { animation-name: zoomIn95; }
    .slide-in-from-left { animation-name: slideInFromLeft; }
    .slide-in-from-bottom-4 { animation-name: slideInFromBottom4; }
  </style>
</head>
<body>
  
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    // --- Componentes de Iconos (SVG en l铆nea) ---
    // (A帽adidos Plus, Minus, Trash)
    const IconProps = {
      className: "w-6 h-6 text-gray-700",
      strokeWidth: 2,
      fill: "none",
      stroke: "currentColor",
      strokeLinecap: "round",
      strokeLinejoin: "round",
    };
    const Menu = () => (
      <svg {...IconProps}><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    );
    const ShoppingCart = () => (
      <svg {...IconProps}><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
    );
    const User = () => (
      <svg {...IconProps}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
    );
    const X = () => (
      <svg {...IconProps} className="w-5 h-5 text-gray-500"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    );
    const ArrowLeft = () => (
      <svg {...IconProps}><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
    );
    const ChevronUp = () => (
      <svg {...IconProps} className="w-5 h-5"><polyline points="18 15 12 9 6 15"></polyline></svg>
    );
    const ChevronDown = () => (
      <svg {...IconProps} className="w-5 h-5 text-gray-400"><polyline points="6 9 12 15 18 9"></polyline></svg>
    );
    const MapPin = ({ className }) => (
      <svg className={className} strokeWidth="1.5" fill="currentColor" viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
    );
    const Hand = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0a2 2 0 0 0-2 2v0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z"></path></svg>
    );
    const UserPlus = ({ className }) => (
      <svg className={className} strokeWidth="1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="17" y1="11" x2="23" y2="11"></line></svg>
    );
    // ***** NUEVOS ICONOS *****
    const Plus = ({ className }) => (
      <svg {...IconProps} className={className || "w-5 h-5"}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
    );
    const Minus = ({ className }) => (
       <svg {...IconProps} className={className || "w-5 h-5"}><line x1="5" y1="12" x2="19" y2="12"></line></svg>
    );
    const Trash = ({ className }) => (
      <svg {...IconProps} className={className || "w-6 h-6 text-gray-500 hover:text-red-600"}><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
    );

    // --- Componente: Men煤 Desplegable Flotante ---
    function DropdownMenu({ options, onSelect }) {
      return (
        <div 
          className="absolute top-full left-0 mt-1 w-full bg-white rounded-lg shadow-2xl border border-gray-100 z-20 animate-in fade-in zoom-in-95"
        >
          <div className="py-1 max-h-48 overflow-y-auto">
            {options.map((option) => (
              <button
                key={option}
                onClick={() => onSelect(option)}
                className="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                {option}
              </button>
            ))}
          </div>
        </div>
      );
    }
    
    // --- Componente 2: Modal de Confirmaci贸n (REUTILIZABLE) ---
    function ConfirmacionModal({ onClose, servicio, desde, hasta, hora }) {
      
      // --- L贸gica de Precios (Simulada) ---
      const totalServicio = 1.50;
      const tarifaRepartidor = 2.25;
      const totalPagar = totalServicio + tarifaRepartidor;
      
      return (
        // Fondo semitransparente
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 animate-in fade-in">
          {/* Contenedor del Modal */}
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto relative p-6 sm:p-8 space-y-4 animate-in zoom-in-95">
            
            {/* Bot贸n de Cierre (Icono X) */}
            <button
              onClick={onClose}
              className="absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors"
            >
              <X />
            </button>

            {/* T铆tulo */}
            <h2 className="text-2xl sm:text-3xl font-bold text-gray-800">
              Confirmar tu Pedido
            </h2>
            
            {/* Resumen del Pedido (DINMICO) */}
            <div className="text-sm text-gray-600 space-y-1 pt-2">
              <p><strong className="text-gray-900">Servicio:</strong> {servicio || "No especificado"}</p>
              <p><strong className="text-gray-900">Desde:</strong> {desde || "No especificado"}</p>
              <p><strong className="text-gray-900">Hasta:</strong> {hasta || "No especificado"}</p>
              <p><strong className="text-gray-900">Hora:</strong> {hora || "No especificado"}</p>
            </div>

            {/* Secci贸n "Monto a Pagar" (ACTUALIZADA) */}
            <div className="space-y-2 py-4 border-t">
              <h3 className="text-lg font-semibold text-gray-800">Monto a Pagar</h3>
              <div className="flex justify-between text-gray-700">
                <p>TOTAL</p>
                <p>${totalServicio.toFixed(2)}</p>
              </div>
              <div className="flex justify-between text-gray-700">
                <p>Tarifa del repartidor</p>
                <p>${tarifaRepartidor.toFixed(2)}</p>
              </div>
              
              {/* Divisor y Nuevo Total */}
              <div className="border-t border-gray-200 pt-2 mt-2"></div>
              <div className="flex justify-between text-xl font-bold text-black">
                <p>Total a pagar</p>
                <p>${totalPagar.toFixed(2)}</p>
              </div>
            </div>

            {/* Secci贸n "M茅todos de Pagos" */}
            <div className="space-y-3 pb-4">
              <h3 className="text-lg font-semibold text-gray-800">M茅todos de Pagos</h3>
              <div className="bg-gray-100 border border-gray-200 rounded-lg p-3 flex items-center space-x-3">
                <span className="text-2xl"></span>
                <span className="font-medium text-gray-800">Efectivo</span>
              </div>
              <p className="text-xs text-gray-500">
                Pagar al repartidor al recibir el pedido
              </p>
            </div>

            {/* Bot贸n de Confirmaci贸n Final */}
            <button className="w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors">
              Confirmar y Publicar Pedido
            </button>
          </div>
        </div>
      );
    }

    // --- Componente: Nueva P谩gina "Impresiones R谩pidas" ---
    function FastPrintsView({ onGoBack, onNavigateToSendReceive, onNavigateToBuyTake }) {
      // --- Estado para el Modal ---
      const [isModalOpen, setIsModalOpen] = useState(false);
      
      // --- Estado para el formulario de Informaci贸n ---
      const [fecha, setFecha] = useState("");
      const [recogida, setRecogida] = useState("");
      const [hora, setHora] = useState("");
      
      // --- L贸gica de Validaci贸n (simplificada para este formulario) ---
      const isInfoValid = fecha.trim() !== "" && recogida.trim() !== "" && hora.trim() !== "";
      
      // (Estado y l贸gica del formulario de Configuraci贸n se mantienen)
      const [pages, setPages] = useState("");
      const [copies, setCopies] = useState("1");
      const [color, setColor] = useState("Color");
      const [paperSize, setPaperSize] = useState("A4");
      const [pagesPerSheet, setPagesPerSheet] = useState("1");
      const [scale, setScale] = useState("Predeterminado");
      const [fileName, setFileName] = useState(null);
      const fileInputRef = useRef(null);
      
      const handleUploadClick = () => fileInputRef.current.click();
      const handleFileSelect = (event) => {
        const file = event.target.files[0];
        if (file) setFileName(file.name);
      };
      
      const [openDropdown, setOpenDropdown] = useState(null);
      const pageOptions = ["Todas", "Solo p谩ginas impares", "Solo p谩ginas pares", "Personalizado"];
      const colorOptions = ["Color", "Blanco y Negro"];
      const paperSizeOptions = ["A4", "Carta", "102 x 152 mm (4 x 6 in)", "89 x 127 mm (3.5 x 5 in)", "Postcard 100 x 148 mm"];
      const pagesPerSheetOptions = ["1", "2", "4", "6", "9", "16"];
      const scaleOptions = ["Predeterminado", "Ajustar al 谩rea de impresi贸n", "Ajustar al tama帽o de papel", "Personalizado"];
      
      const handleSelect = (setter) => (value) => {
        setter(value);
        setOpenDropdown(null);
      };
      const toggleDropdown = (name) => {
        setOpenDropdown(openDropdown === name ? null : name);
      };

      return (
        <div className="min-h-screen bg-gray-50 p-4 sm:p-8 animate-in fade-in duration-300">
          <div className="w-full max-w-4xl mx-auto">
            {/* Header de la nueva vista (solo flecha) */}
            <div className="flex items-center justify-between mb-6">
              <button
                onClick={onGoBack}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              >
                <ArrowLeft />
              </button>
              
              {/* Botones de P铆ldora */}
              <div className="flex gap-2">
                <button 
                  onClick={onNavigateToSendReceive}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Enviar/Recoger
                </button>
                <button className="px-5 py-2 bg-black text-white rounded-full font-medium text-sm">
                  Impresiones r谩pidas
                </button>
                <button 
                  onClick={onNavigateToBuyTake}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Comprar/LLevar
                </button>
              </div>
              <div className="w-10 h-10"></div> {/* Espaciador */}
            </div>


            {/* Grid de 2 columnas: Formulario y Mapa */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">

              {/* Columna 1: Formularios */}
              <div className="flex flex-col gap-6">
                {/* Card 1: Informaci贸n (MODIFICADA) */}
                <div className="bg-white rounded-2xl shadow-2xl p-6">
                  <h2 className="text-3xl font-bold text-gray-800 mb-6">
                    Informaci贸n
                  </h2>
                  <div className="space-y-4">
                    <input
                      type="text"
                      placeholder="Fecha"
                      onFocus={(e) => (e.target.type = "date")}
                      onBlur={(e) => (e.target.type = "text")}
                      className="w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all text-gray-700"
                      value={fecha}
                      onChange={(e) => setFecha(e.target.value)}
                    />
                    <input
                      type="text"
                      placeholder="Punto de Recogida"
                      className="w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all"
                      value={recogida}
                      onChange={(e) => setRecogida(e.target.value)}
                    />
                    <input
                      type="text"
                      placeholder="Hora de Entrega Deseada"
                      onFocus={(e) => (e.target.type = "time")}
                      onBlur={(e) => (e.target.type = "text")}
                      className="w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all text-gray-700"
                      value={hora}
                      onChange={(e) => setHora(e.target.value)}
                    />
                    {/* Bot贸n de Confirmar (MODIFICADO) */}
                    <button 
                      onClick={() => setIsModalOpen(true)}
                      disabled={!isInfoValid} // Validaci贸n
                      className={
                        isInfoValid
                          ? "w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors"
                          : "w-full bg-gray-200 text-gray-500 py-3 rounded-lg font-medium cursor-not-allowed"
                      }
                    >
                      Confirmar
                    </button>
                  </div>
                </div>

                {/* Card 2: Configuraci贸n (Sin cambios en la l贸gica interna) */}
                <div className="bg-white rounded-2xl shadow-2xl p-6">
                  <h3 className="text-xl font-semibold text-gray-800 mb-4">
                    Configuraci贸n
                  </h3>
                  <div className="space-y-4">
                    <input type="file" ref={fileInputRef} onChange={handleFileSelect} style={{ display: "none" }} accept=".pdf" />
                    <button onClick={handleUploadClick} className="w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                      {fileName || "Subir PDF"}
                    </button>
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-1">P谩ginas</label>
                      <button onClick={() => toggleDropdown("pages")} className="w-full flex justify-between items-center px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg text-left">
                        <span className={pages === "Personalizado" ? "text-gray-500" : "text-gray-700"}>
                          {pages === "Personalizado" ? "Personalizado" : pages || "Todas"}
                        </span>
                        <ChevronDown />
                      </button>
                      {openDropdown === "pages" && (<DropdownMenu options={pageOptions} onSelect={handleSelect(setPages)} />)}
                    </div>
                    {pages === "Personalizado" && (
                       <input type="text" placeholder="p. ej: 1-5,8,11-13" className="w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                    )}
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Copias</label>
                        <input type="number" value={copies} onChange={(e) => setCopies(e.target.value)} className="w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                      </div>
                      <div className="relative">
                        <label className="block text-sm font-medium text-gray-700 mb-1">Color</label>
                        <button onClick={() => toggleDropdown("color")} className="w-full flex justify-between items-center px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg text-left">
                          <span className="text-gray-700">{color}</span>
                          <ChevronDown />
                        </button>
                        {openDropdown === "color" && (<DropdownMenu options={colorOptions} onSelect={handleSelect(setColor)} />)}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Columna 2: Mapa y M谩s Ajustes (Sin cambios) */}
              <div className="flex flex-col gap-6">
                <div className="bg-white rounded-2xl shadow-2xl p-4 flex items-center justify-center min-h-[300px] md:h-full">
                  <div className="w-full h-full bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300">
                    <div className="text-center text-gray-500">
                      <MapPin className="w-16 h-16 text-gray-400 mx-auto" />
                      <p className="font-medium mt-2">Espacio para el mapa</p>
                    </div>
                  </div>
                </div>
                <div className="bg-white rounded-2xl shadow-2xl p-6">
                   <h3 className="text-xl font-semibold text-gray-800 mb-4">
                    M谩s ajustes
                  </h3>
                  <div className="space-y-4">
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-1">Tama帽o de Papel</label>
                      <button onClick={() => toggleDropdown("paperSize")} className="w-full flex justify-between items-center px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg text-left">
                        <span className="text-gray-700">{paperSize}</span>
                        <ChevronDown />
                      </button>
                      {openDropdown === "paperSize" && (<DropdownMenu options={paperSizeOptions} onSelect={handleSelect(setPaperSize)} />)}
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                      <div className="relative">
                        <label className="block text-sm font-medium text-gray-700 mb-1">P谩ginas por hoja</label>
                        <button onClick={() => toggleDropdown("pagesPerSheet")} className="w-full flex justify-between items-center px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg text-left">
                          <span className="text-gray-700">{pagesPerSheet}</span>
                          <ChevronDown />
                        </button>
                        {openDropdown === "pagesPerSheet" && (<DropdownMenu options={pagesPerSheetOptions} onSelect={handleSelect(setPagesPerSheet)} />)}
                      </div>
                      <div className="relative">
                        <label className="block text-sm font-medium text-gray-700 mb-1">Escala</label>
                        <button onClick={() => toggleDropdown("scale")} className="w-full flex justify-between items-center px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg text-left">
                          <span className="text-gray-700">{scale}</span>
                          <ChevronDown />
                        </button>
                        {openDropdown === "scale" && (<DropdownMenu options={scaleOptions} onSelect={handleSelect(setScale)} />)}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div> {/* Cierre del grid */}
          </div>
          
          {isModalOpen && <ConfirmacionModal 
            onClose={() => setIsModalOpen(false)}
            servicio="Impresiones r谩pidas"
            desde={recogida}
            hasta="N/A"
            hora={hora}
          />}
          
        </div>
      );
    }

    // --- Componente: Nueva P谩gina "Enviar/Recoger" ---
    function SendReceiveView({ onGoBack, onNavigateToFastPrints, onNavigateToBuyTake }) {
      
      // --- Estado del Formulario ---
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [fecha, setFecha] = useState("");
      const [recogida, setRecogida] = useState("");
      const [entrega, setEntrega] = useState("");
      const [hora, setHora] = useState("");
      const [descripcion, setDescripcion] = useState("");
      const [whatsapp, setWhatsapp] = useState("");

      // --- L贸gica de Validaci贸n ---
      const isFormValid = fecha.trim() !== "" && 
                          recogida.trim() !== "" && 
                          entrega.trim() !== "" && 
                          hora.trim() !== "" && 
                          descripcion.trim() !== "" && 
                          whatsapp.trim() !== "";

      return (
        <div className="min-h-screen bg-white p-4 sm:p-8 animate-in fade-in duration-300">
          <div className="w-full max-w-6xl mx-auto">
            
            {/* Barra de Navegaci贸n Superior (P铆ldoras) */}
            <div className="flex items-center justify-between mb-6">
              <button
                onClick={onGoBack}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              >
                <ArrowLeft />
              </button>
              
              <div className="flex gap-2">
                <button className="px-5 py-2 bg-black text-white rounded-full font-medium text-sm">
                  Enviar/Recoger
                </button>
                <button 
                  onClick={onNavigateToFastPrints}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Impresiones r谩pidas
                </button>
                <button 
                  onClick={onNavigateToBuyTake}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Comprar/LLevar
                </button>
              </div>
              
              <div className="w-10 h-10"></div>{/* Espaciador */}
            </div>

            {/* Layout de 2 columnas */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              
              {/* Columna Izquierda (Formulario "Informaci贸n") */}
              <div className="bg-white rounded-2xl shadow-lg p-6 sm:p-8 space-y-4">
                <h2 className="text-3xl font-bold text-gray-800 mb-4">
                  Informaci贸n
                </h2>
                
                <input 
                  type="text" 
                  placeholder="Fecha" 
                  onFocus={(e) => (e.target.type = "date")}
                  onBlur={(e) => (e.target.type = "text")}
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={fecha}
                  onChange={(e) => setFecha(e.target.value)}
                />
                <input 
                  type="text" 
                  placeholder="Punto de Recogida" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={recogida}
                  onChange={(e) => setRecogida(e.target.value)}
                />
                <input 
                  type="text" 
                  placeholder="Punto de Entrega" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={entrega}
                  onChange={(e) => setEntrega(e.target.value)}
                />
                <input 
                  type="text" 
                  placeholder="Hora de Entrega Deseada" 
                  onFocus={(e) => (e.target.type = "time")}
                  onBlur={(e) => (e.target.type = "text")}
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={hora}
                  onChange={(e) => setHora(e.target.value)}
                />
                <textarea 
                  placeholder="Descripci贸n 驴Qu茅 se transporta?" 
                  rows="4"
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={descripcion}
                  onChange={(e) => setDescripcion(e.target.value)}
                ></textarea>
                <input 
                  type="tel" 
                  placeholder="Numero de Whatsapp" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={whatsapp}
                  onChange={(e) => setWhatsapp(e.target.value)}
                />
                
                {/* Bot贸n de Acci贸n (DINMICO) */}
                <button 
                  onClick={() => setIsModalOpen(true)}
                  disabled={!isFormValid} // Deshabilitado si el formulario no es v谩lido
                  className={
                    isFormValid
                      ? "w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors mt-2"
                      : "w-full bg-gray-200 text-gray-500 py-3 rounded-lg font-medium cursor-not-allowed mt-2"
                  }
                >
                  Confirmar
                </button>
              </div>
              
              {/* Columna Derecha (Espacio para el Mapa) */}
              <div className="bg-white rounded-2xl shadow-lg p-4 flex items-center justify-center min-h-[400px]">
                <div className="text-center text-gray-500">
                  <MapPin className="w-16 h-16 text-gray-400 mx-auto" />
                  <p className="font-medium mt-2">Espacio para el mapa</p>
                </div>
              </div>

            </div>
          </div>
          
          {isModalOpen && <ConfirmacionModal 
            onClose={() => setIsModalOpen(false)}
            servicio="Enviar/Recoger"
            desde={recogida}
            hasta={entrega}
            hora={hora}
          />}
          
        </div>
      );
    }
    
    // ***** INICIO DEL NUEVO COMPONENTE *****
    // --- Componente: Nueva P谩gina "Comprar/LLevar" ---
    function BuyTakeView({ onGoBack, onNavigateToSendReceive, onNavigateToFastPrints }) {
      
      // --- Estado del Formulario de Informaci贸n ---
      const [storeName, setStoreName] = useState("");
      const [storeAddress, setStoreAddress] = useState("");
      const [deliveryPoint, setDeliveryPoint] = useState("");

      // --- Estado de la Lista de Compras ---
      const [items, setItems] = useState([]); // Array de objetos: { id, description, quantity, cost }
      const [nextId, setNextId] = useState(1); // Para IDs 煤nicos
      
      // --- Estado de UI y Validaci贸n ---
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [showTooltip, setShowTooltip] = useState(false);
      let tooltipTimeout = useRef(null); // Ref para manejar el timeout del tooltip

      // --- L贸gica de la Lista de Compras ---
      
      const handleAddItem = () => {
        setItems([...items, { id: nextId, description: '', quantity: 1, cost: '' }]);
        setNextId(nextId + 1); // Incrementar el ID para el pr贸ximo item
      };

      const handleDeleteItem = (id) => {
        setItems(items.filter(item => item.id !== id));
      };

      // Handler gen茅rico para actualizar un campo de un item
      const handleItemChange = (id, field, value) => {
        setItems(currentItems =>
          currentItems.map(item => {
            if (item.id === id) {
              // Manejo especial para cantidad (no menor a 1)
              if (field === 'quantity') {
                const newQuantity = parseInt(value) || 1;
                return { ...item, quantity: Math.max(1, newQuantity) };
              }
              return { ...item, [field]: value };
            }
            return item;
          })
        );
      };

      // Handler para botones +/-
      const handleQuantityAdjust = (id, amount) => {
        setItems(currentItems =>
          currentItems.map(item => {
            if (item.id === id) {
              const newQuantity = (parseInt(item.quantity) || 1) + amount;
              return { ...item, quantity: Math.max(1, newQuantity) }; // No puede ser menor a 1
            }
            return item;
          })
        );
      };

      // --- C谩lculos y Validaci贸n ---
      
      // Calcular el total a pagar sumando los costos estimados
      const totalPagar = items.reduce((sum, item) => {
        return sum + (parseFloat(item.cost) || 0) * (parseInt(item.quantity) || 1);
      }, 0);

      // Validaci贸n de la secci贸n de Informaci贸n
      const isInfoValid = storeName.trim() !== "" && 
                          storeAddress.trim() !== "" && 
                          deliveryPoint.trim() !== "";
                          
      // Validaci贸n de la lista de items
      const areItemsValid = items.length > 0 && items.every(item => 
                            item.description.trim() !== "" &&
                            (parseInt(item.quantity) || 0) > 0 &&
                            (parseFloat(item.cost) || 0) > 0 // Costo estimado debe ser un n煤mero positivo
                          );
      
      // Validaci贸n general del formulario
      const isFormValid = isInfoValid && areItemsValid;

      // --- Manejador del Bot贸n Principal ---
      
      const handleConfirmClick = () => {
        // Limpiar timeout anterior si existe
        if (tooltipTimeout.current) {
          clearTimeout(tooltipTimeout.current);
        }

        if (isFormValid) {
          // Si todo es v谩lido, abrimos el modal
          console.log("Formulario v谩lido. Abriendo modal...");
          // (La l贸gica del modal de confirmaci贸n a煤n no se ha pedido para esta vista,
          // pero aqu铆 es donde ir铆a. Por ahora, un alert.)
          alert("隆Pedido confirmado! (L贸gica del modal pendiente)");
        } else if (isInfoValid && items.length === 0) {
          // Si la info est谩 bien pero faltan items, mostrar tooltip
          setShowTooltip(true);
          tooltipTimeout.current = setTimeout(() => setShowTooltip(false), 3000); // Ocultar despu茅s de 3 seg
        } else {
          // Cualquier otra validaci贸n fallida
          console.log("Formulario inv谩lido. Info completa:", isInfoValid, "Items v谩lidos:", areItemsValid);
          // Aqu铆 se podr铆an mostrar otros tooltips, p.ej. "Complete la informaci贸n"
          // O si los items est谩n incompletos
          if (isInfoValid && items.length > 0 && !areItemsValid) {
            alert("Por favor, complete todos los campos de los productos (descripci贸n, cantidad y costo).");
          } else if (!isInfoValid) {
            alert("Por favor, complete la secci贸n de 'Informaci贸n' (tienda y entrega).");
          }
        }
      };

      return (
        <div className="min-h-screen bg-white p-4 sm:p-8 animate-in fade-in duration-300">
          <div className="w-full max-w-4xl mx-auto">
            
            {/* Barra de Navegaci贸n Superior (P铆ldoras) */}
            <div className="flex items-center justify-between mb-6">
              <button
                onClick={onGoBack}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              >
                <ArrowLeft />
              </button>
              
              <div className="flex gap-2">
                <button 
                  onClick={onNavigateToSendReceive}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Enviar/Recoger
                </button>
                <button 
                  onClick={onNavigateToFastPrints}
                  className="px-5 py-2 bg-gray-200 text-gray-800 rounded-full font-medium text-sm hover:bg-gray-300 transition-colors"
                >
                  Impresiones r谩pidas
                </button>
                <button className="px-5 py-2 bg-black text-white rounded-full font-medium text-sm">
                  Comprar/LLevar
                </button>
              </div>
              
              <div className="w-10 h-10"></div>{/* Espaciador */}
            </div>

            {/* Layout de 2 columnas (solo en pantallas grandes) */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
              {/* Columna Izquierda: Informaci贸n */}
              <div className="bg-white rounded-2xl shadow-lg p-6 sm:p-8 space-y-4 h-full">
                <h2 className="text-3xl font-bold text-gray-800 mb-4">
                  Informaci贸n
                </h2>
                <input 
                  type="text" 
                  placeholder="Nombre de la Tienda / Lugar" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={storeName}
                  onChange={(e) => setStoreName(e.target.value)}
                />
                <input 
                  type="text" 
                  placeholder="Direcci贸n o Referencia del Lugar" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={storeAddress}
                  onChange={(e) => setStoreAddress(e.target.value)}
                />
                <input 
                  type="text" 
                  placeholder="Punto de Entrega" 
                  className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                  value={deliveryPoint}
                  onChange={(e) => setDeliveryPoint(e.target.value)}
                />
              </div>
              
              {/* Columna Derecha: Mapa */}
              <div className="bg-white rounded-2xl shadow-lg p-4 flex items-center justify-center min-h-[300px]">
                <div className="w-full h-full bg-gray-100 rounded-lg flex items-center justify-center">
                  <div className="text-center text-gray-500">
                    <MapPin className="w-16 h-16 text-gray-400 mx-auto" />
                    <p className="font-medium mt-2">Espacio para el mapa</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Secci贸n Lista de Compras (ocupa todo el ancho) */}
            <div className="bg-white rounded-2xl shadow-lg p-6 sm:p-8 space-y-4">
              <h2 className="text-3xl font-bold text-gray-800 mb-4">
                Lista de Compras Detallada
              </h2>
              
              {/* Encabezados de la lista (visibles solo si hay items) */}
              {items.length > 0 && (
                <div className="hidden md:grid grid-cols-12 gap-4 items-center mb-2 px-2">
                  <div className="col-span-5"><label className="text-sm font-medium text-gray-600">Descripci贸n del producto</label></div>
                  <div className="col-span-3"><label className="text-sm font-medium text-gray-600">Cantidad a comprar</label></div>
                  <div className="col-span-3"><label className="text-sm font-medium text-gray-600">Costo Estimado</label></div>
                  <div className="col-span-1"></div> {/* Espacio para el basurero */}
                </div>
              )}

              {/* Lista de Items Din谩mica */}
              <div className="space-y-4">
                {items.map(item => (
                  <div key={item.id} className="grid grid-cols-12 gap-4 items-center">
                    {/* Descripci贸n */}
                    <div className="col-span-12 md:col-span-5">
                      <label className="text-sm font-medium text-gray-600 md:hidden">Descripci贸n</label>
                      <input 
                        type="text" 
                        placeholder="驴Qu茅 deseas comprar?" 
                        className="w-full px-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                        value={item.description}
                        onChange={(e) => handleItemChange(item.id, 'description', e.target.value)}
                      />
                    </div>
                    
                    {/* Cantidad */}
                    <div className="col-span-6 md:col-span-3">
                      <label className="text-sm font-medium text-gray-600 md:hidden">Cantidad</label>
                      <div className="flex items-center">
                        <button 
                          onClick={() => handleQuantityAdjust(item.id, -1)}
                          className="p-2 bg-gray-200 rounded-l-lg hover:bg-gray-300"
                        >
                          <Minus className="w-5 h-5" />
                        </button>
                        <input 
                          type="number" 
                          className="w-full text-center px-2 py-3 bg-gray-100 outline-none border-t border-b border-gray-100 focus:ring-2 focus:ring-black"
                          value={item.quantity}
                          onChange={(e) => handleItemChange(item.id, 'quantity', e.target.value)}
                          min="1"
                        />
                        <button 
                          onClick={() => handleQuantityAdjust(item.id, 1)}
                          className="p-2 bg-gray-200 rounded-r-lg hover:bg-gray-300"
                        >
                          <Plus className="w-5 h-5" />
                        </button>
                      </div>
                    </div>
                    
                    {/* Costo Estimado */}
                    <div className="col-span-6 md:col-span-3">
                      
                      {/* ***** INICIO DE LA CORRECCIN ***** */}
                      <label className="text-sm font-medium text-gray-600 md:hidden">Costo Estimado</label>
                      {/* ***** FIN DE LA CORRECCIN ***** */}
                      
                      <div className="relative">
                        <span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                        <input 
                          type="number" 
                          placeholder="0.00"
                          className="w-full pl-7 pr-4 py-3 bg-gray-100 rounded-lg outline-none focus:ring-2 focus:ring-black"
                          value={item.cost}
                          onChange={(e) => handleItemChange(item.id, 'cost', e.target.value)}
                          min="0"
                        />
                      </div>
                    </div>
                    
                    {/* Bot贸n de Eliminar */}
                    <div className="col-span-12 md:col-span-1 flex justify-end items-center">
                      <button onClick={() => handleDeleteItem(item.id)} className="p-2">
                        <Trash />
                      </button>
                    </div>
                  </div>
                ))}
              </div>

              {/* Bot贸n de A帽adir Producto */}
              <button 
                onClick={handleAddItem}
                className="flex items-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50"
              >
                <Plus className="w-5 h-5" />
                A帽adir Producto
              </button>

              {/* Separador y Total */}
              <div className="border-t border-gray-200 pt-4 mt-4">
                <div className="flex justify-end items-center">
                  <span className="text-lg font-medium text-gray-700">Total a pagar:</span>
                  <span className="text-2xl font-bold text-black w-32 text-right">
                    ${totalPagar.toFixed(2)}
                  </span>
                </div>
              </div>
            </div>

            {/* Secci贸n de Confirmaci贸n y Tooltip */}
            <div className="mt-8 flex justify-end items-center relative">
              {/* Tooltip (basado en la imagen) */}
              {showTooltip && (
                <div className="absolute bottom-full right-0 mb-2 px-4 py-2 bg-gray-700 text-white text-sm rounded-lg shadow-lg animate-in fade-in zoom-in-95">
                  Por favor, a帽ade al menos un producto a la lista
                  <div className="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-gray-700"></div>
                </div>
              )}
              
              {/* Bot贸n de Confirmar y Pagar */}
              <button
                onClick={handleConfirmClick}
                className={
                  isFormValid
                  ? "px-8 py-3 bg-black text-gray-300 rounded-lg font-medium hover:bg-gray-800 transition-colors"
                  : "px-8 py-3 bg-gray-200 text-gray-500 rounded-lg font-medium cursor-not-allowed"
                }
              >
                Confirmar y pagar
              </button>
            </div>
            
          </div>
          
          {/* Aqu铆 ir铆a el modal de confirmaci贸n si se implementara */}
          {/* {isModalOpen && <ConfirmacionModal ... />} */}
          
        </div>
      );
    }
    // ***** FIN DEL NUEVO COMPONENTE *****


    // --- Componente: Nueva P谩gina "Programa tu Mandado" ---
    function NewFavorView({ onGoBack, onNavigateToSendReceive, onNavigateToFastPrints, onNavigateToBuyTake }) {
      
      const inputClass = "w-full px-4 py-3 bg-gray-100 border border-gray-100 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all text-gray-700";
      const buttonClass = "w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors";

      return (
        <div className="min-h-screen bg-gray-50 p-4 sm:p-8 animate-in fade-in duration-300">
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-auto">
            <div className="flex items-center p-6 pb-4">
              <button
                onClick={onGoBack}
                className="p-2 hover:bg-gray-100 rounded-full transition-colors mr-4"
              >
                <ArrowLeft />
              </button>
              <h2 className="text-4xl font-bold text-gray-800">
                Programa tu Mandado
              </h2>
            </div>
            <div className="px-6 pb-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="space-y-4">
                  <input type="text" placeholder="Fecha" onFocus={(e) => (e.target.type = "date")} onBlur={(e) => (e.target.type = "text")} className={inputClass} />
                  <input type="text" placeholder="Punto de Recogida" className={inputClass} />
                  <input type="text" placeholder="Hora de Entrega Deseada" onFocus={(e) => (e.target.type = "time")} onBlur={(e) => (e.target.type = "text")} className={inputClass} />
                </div>
                <div className="space-y-4">
                  <input type="text" placeholder="Punto de Entrega" className={inputClass} />
                  <input type="tel" placeholder="Numero de Whatsapp" className={inputClass} />
                </div>
              </div>
              <button className={`${buttonClass} mt-4`}>
                Programar Servicio
              </button>
              
              {/* --- Categor铆as (ACTUALIZADO) --- */}
              <div className="mt-8">
                <h3 className="text-xl font-bold text-gray-800 mb-4">
                  Categor铆a de Servicios
                </h3>
                <div className="flex flex-col gap-4">
                  
                  {/* Impresiones */}
                  <div 
                    onClick={onNavigateToFastPrints}
                    className="bg-gray-100 p-4 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors"
                  >
                    <div className="flex justify-between items-center">
                      <h4 className="font-bold text-sm">IMPRESIONES RPIDAS</h4>
                      <ChevronUp />
                    </div>
                    <p className="text-sm text-gray-600 mt-2">
                      Sube archivos digitales y recoge el pedido listo en el punto designado.
                    </p>
                  </div>
                  
                  {/* Enviar/Recoger */}
                  <div
                    onClick={onNavigateToSendReceive}
                    className="bg-gray-100 p-4 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors"
                  >
                    <h4 className="font-bold text-sm">ENVIAR/RECOGER</h4>
                    <p className="text-sm text-gray-600 mt-2">
                      Servicio de mensajer铆a interna r谩pido para trasladar objetos entre dos puntos del campus.
                    </p>
                  </div>
                  
                  {/* Comprar/LLevar (CONECTADO) */}
                  <div
                    onClick={onNavigateToBuyTake}
                    className="bg-gray-100 p-4 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors"
                  >
                    <h4 className="font-bold text-sm">COMPRAR/LLEVAR</h4>
                    <p className="text-sm text-gray-600 mt-2">
                      Pide art铆culos de tiendas fuera del campus y rec铆belos sin salir.
                    </p>
                  </div>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // --- Componente: P谩gina Principal ---
    function HomePage() {
      const [menuOpen, setMenuOpen] = useState(false);
      const [showAuthModal, setShowAuthModal] = useState(false);
      const [authMode, setAuthMode] = useState("signin");
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [currentView, setCurrentView] =useState("home"); // 'home', 'newFavor', 'sendReceive', 'fastPrints', 'help', 'buyTake'

      const faqData = [
        { q: "驴C贸mo hago un pedido de un favor?", a: "Simplemente navega por las categor铆as, selecciona el favor que necesitas, y completa los detalles de recogida y entrega." },
        { q: "驴C贸mo s茅 d贸nde est谩 mi pedido?", a: "Puedes seguir el progreso de tu favor en tiempo real desde la secci贸n \"Historial de Pedidos\" y ver la ubicaci贸n del repartidor en el mapa." },
        { q: "驴Qu茅 m茅todos de pago aceptan?", a: "Solo pago en efectivo." },
        { q: "驴Puedo cancelar un favor?", a: "S铆, puedes cancelar un favor desde la secci贸n \"Historial de Pedidos\" siempre y cuando el repartidor a煤n no haya confirmado la recogida." },
        { isSeparator: true },
        { q: "驴C贸mo me registro para hacer entregas?", a: "Haz clic en \"Reg铆strate para hacer entregas\" en la p谩gina principal, completa tus datos (carnet estudiantil) y sube tu foto de perfil." },
        { q: "驴Qu茅 necesito para ser repartidor?", a: "Solo necesitas tu carnet estudiantil vigente y tiempo libre para aceptar favores." },
        { q: "驴C贸mo acepto un favor?", a: "Cuando haya un favor disponible cerca, aparecer谩 una notificaci贸n. Haz clic en \"Aceptar\" y se te mostrar谩 el mapa con las direcciones de recogida y entrega." },
        { q: "驴Cu谩ndo recibo mi pago?", a: "Recibes el pago del favor en efectivo directamente del cliente al momento de completar la entrega." }
      ];

      const renderHelpView = () => {
        return (
          <div className="min-h-screen bg-white">
            <header className="bg-white shadow-sm sticky top-0 z-50 border-b border-gray-200">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex items-center justify-between h-16">
                  <button onClick={() => setMenuOpen(!menuOpen)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <Menu />
                  </button>
                  <div className="flex items-center gap-3">
                    {isLoggedIn ? (
                      <button className="p-2 hover:bg-gray-100 rounded-lg transition-colors"><User /></button>
                    ) : (
                      <>
                        <button onClick={() => { setAuthMode("signin"); setShowAuthModal(true); }} className="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">Sign in</button>
                        <button onClick={() => { setAuthMode("register"); setShowAuthModal(true); }} className="px-4 py-2 text-sm font-medium text-white bg-black hover:bg-gray-800 rounded-lg transition-colors">Register</button>
                      </>
                    )}
                    <div className="w-px h-8 bg-gray-300 mx-2" />
                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-colors relative"><ShoppingCart /></button>
                  </div>
                </div>
              </div>
              {showAuthModal && (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200">
                  <div className="bg-white rounded-2xl shadow-2xl w-full max-w-sm animate-in zoom-in-95 duration-200">
                    <div className="flex items-center justify-between p-6 pb-4">
                      <h2 className="text-xl font-semibold text-gray-800">{authMode === "signin" ? "Iniciar sesi贸n" : "Registrarse"}</h2>
                      <button onClick={() => setShowAuthModal(false)} className="p-2 hover:bg-gray-100 rounded-full transition-colors"><X /></button>
                    </div>
                    <div className="px-6 pb-6">
                      <div className="space-y-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                          <input type="email" placeholder="nombre@ejemplo.ej" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Contrase帽a</label>
                          <input type="password" placeholder="Ejemplo123" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                        </div>
                        <button onClick={() => { if (authMode === "signin") { setIsLoggedIn(true); setShowAuthModal(false); } }} className="w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors mt-6">
                          {authMode === "signin" ? "Iniciar sesi贸n" : "Registrarse"}
                        </button>
                        {authMode === "signin" && (<div className="text-center mt-4"><button className="text-sm text-gray-600 hover:text-black transition-colors underline">驴Contrase帽a olvidada?</button></div>)}
                        <div className="text-center mt-6 pt-6 border-t border-gray-200">
                          <p className="text-sm text-gray-600">
                            {authMode === "signin" ? "驴No tienes cuenta?" : "驴Ya tienes cuenta?"}{" "}
                            <button onClick={() => setAuthMode(authMode === "signin" ? "register" : "signin")} className="text-black font-medium hover:underline">
                              {authMode === "signin" ? "Reg铆strate" : "Inicia sesi贸n"}
                            </button>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}
              {menuOpen && (
                <div className="absolute top-16 left-0 w-64 bg-white shadow-lg border-t animate-in slide-in-from-left z-50">
                  <nav className="py-2">
                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentView("home"); setMenuOpen(false); }} className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Inicio</a>
                    <a href="#" className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Mis pedidos</a>
                    <a href="#" className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Ser repartidor</a>
                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentView("help"); setMenuOpen(false); }} className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Ayuda</a>
                  </nav>
                </div>
              )}
            </header>
            <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-8">
                {faqData.map((item, index) => {
                  if (item.isSeparator) {
                    return (<div key={index} className="md:col-span-2 border-t border-gray-200 my-4"></div>);
                  }
                  return (
                    <React.Fragment key={index}>
                      <div className="flex flex-col justify-center">
                        <h3 className="text-lg font-semibold text-gray-800 py-4 border-b border-gray-200">{item.q}</h3>
                      </div>
                      <div className="flex flex-col justify-center">
                        <p className="text-gray-600 py-4 border-b border-gray-200">{item.a}</p>
                      </div>
                    </React.Fragment>
                  );
                })}
              </div>
            </main>
          </div>
        );
      };

      // --- L贸gica de Navegaci贸n ---
      if (currentView === "newFavor") {
        return <NewFavorView 
          onGoBack={() => setCurrentView("home")} 
          onNavigateToSendReceive={() => setCurrentView("sendReceive")}
          onNavigateToFastPrints={() => setCurrentView("fastPrints")}
          onNavigateToBuyTake={() => setCurrentView("buyTake")}
        />;
      }
      if (currentView === "sendReceive") {
        return <SendReceiveView 
          onGoBack={() => setCurrentView("newFavor")}
          onNavigateToFastPrints={() => setCurrentView("fastPrints")}
          onNavigateToBuyTake={() => setCurrentView("buyTake")}
        />;
      }
      if (currentView === "fastPrints") {
        return <FastPrintsView 
          onGoBack={() => setCurrentView("newFavor")}
          onNavigateToSendReceive={() => setCurrentView("sendReceive")}
          onNavigateToBuyTake={() => setCurrentView("buyTake")}
        />;
      }
      // ***** NUEVO BLOQUE DE RENDER *****
      if (currentView === "buyTake") {
        return <BuyTakeView 
          onGoBack={() => setCurrentView("newFavor")}
          onNavigateToSendReceive={() => setCurrentView("sendReceive")}
          onNavigateToFastPrints={() => setCurrentView("fastPrints")}
        />;
      }
      if (currentView === "help") {
        return renderHelpView();
      }

      // --- Vista "home" (P谩gina Principal) ---
      return (
        <div className="min-h-screen bg-gray-50">
          <header className="bg-white shadow-sm sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <div className="flex items-center justify-between h-16">
                <button onClick={() => setMenuOpen(!menuOpen)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors"><Menu /></button>
                <div className="flex items-center gap-3">
                  {isLoggedIn ? (
                    <button className="p-2 hover:bg-gray-100 rounded-lg transition-colors"><User /></button>
                  ) : (
                    <>
                      <button onClick={() => { setAuthMode("signin"); setShowAuthModal(true); }} className="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">Sign in</button>
                      <button onClick={() => { setAuthMode("register"); setShowAuthModal(true); }} className="px-4 py-2 text-sm font-medium text-white bg-black hover:bg-gray-800 rounded-lg transition-colors">Register</button>
                    </>
                  )}
                  <div className="w-px h-8 bg-gray-300 mx-2" />
                  <button className="p-2 hover:bg-gray-100 rounded-lg transition-colors relative"><ShoppingCart /></button>
                </div>
              </div>
            </div>
            {showAuthModal && (
              <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200">
                <div className="bg-white rounded-2xl shadow-2xl w-full max-w-sm animate-in zoom-in-95 duration-200">
                  <div className="flex items-center justify-between p-6 pb-4">
                    <h2 className="text-xl font-semibold text-gray-800">{authMode === "signin" ? "Iniciar sesi贸n" : "Registrarse"}</h2>
                    <button onClick={() => setShowAuthModal(false)} className="p-2 hover:bg-gray-100 rounded-full transition-colors"><X /></button>
                  </div>
                  <div className="px-6 pb-6">
                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" placeholder="nombre@ejemplo.ej" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Contrase帽a</label>
                        <input type="password" placeholder="Ejemplo123" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent outline-none transition-all" />
                      </div>
                      <button onClick={() => { if (authMode === "signin") { setIsLoggedIn(true); setShowAuthModal(false); } }} className="w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors mt-6">
                        {authMode === "signin" ? "Iniciar sesi贸n" : "Registrarse"}
                      </button>
                      {authMode === "signin" && (<div className="text-center mt-4"><button className="text-sm text-gray-600 hover:text-black transition-colors underline">驴Contrase帽a olvidada?</button></div>)}
                      <div className="text-center mt-6 pt-6 border-t border-gray-200">
                        <p className="text-sm text-gray-600">
                          {authMode === "signin" ? "驴No tienes cuenta?" : "驴Ya tienes cuenta?"}{" "}
                          <button onClick={() => setAuthMode(authMode === "signin" ? "register" : "signin")} className="text-black font-medium hover:underline">
                            {authMode === "signin" ? "Reg铆strate" : "Inicia sesi贸n"}
                          </button>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
            {menuOpen && (
              <div className="absolute top-16 left-0 w-64 bg-white shadow-lg border-t animate-in slide-in-from-left">
                <nav className="py-2">
                  <a href="#" onClick={(e) => { e.preventDefault(); setCurrentView("home"); setMenuOpen(false); }} className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Inicio</a>
                  <a href="#" className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Mis pedidos</a>
                  <a href="#" className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Ser repartidor</a>
                  <a href="#" onClick={(e) => { e.preventDefault(); setCurrentView("help"); setMenuOpen(false); }} className="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors">Ayuda</a>
                </nav>
              </div>
            )}
          </header>
          <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div className="relative rounded-2xl overflow-hidden mb-12 h-64 sm:h-80 animate-in fade-in slide-in-from-bottom-4 duration-700" style={{ animationDelay: '100ms' }}>
              <div className="absolute inset-0 bg-gradient-to-br from-amber-400 via-orange-300 to-amber-200">
                <div className="absolute inset-0 opacity-20">
                  <div className="absolute top-10 right-20 w-32 h-32 bg-white rounded-full blur-3xl"></div>
                  <div className="absolute bottom-20 left-10 w-40 h-40 bg-orange-500 rounded-full blur-3xl"></div>
                </div>
                <div className="absolute bottom-0 left-0 w-full h-full flex items-end justify-start pl-12">
                  <div className="relative w-48 h-64">
                    <div className="absolute top-8 left-12 w-16 h-16 bg-amber-900 rounded-full"></div>
                    <div className="absolute top-20 left-14 w-12 h-8 bg-amber-950 rounded-b-full"></div>
                    <div className="absolute top-24 left-4 w-32 h-40 bg-gradient-to-b from-yellow-500 to-yellow-600 rounded-t-3xl"></div>
                    <div className="absolute top-20 left-8 w-24 h-20 bg-yellow-600 rounded-t-full"></div>
                  </div>
                </div>
              </div>
              <div className="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent" />
              <div className="relative h-full flex flex-col justify-center px-8 sm:px-12">
                <h1 className="text-4xl sm:text-5xl font-bold text-white mb-3 animate-in slide-in-from-left duration-700" style={{ animationDelay: '150ms' }}>
                  Pide tu favor ahora.
                </h1>
                <p className="text-lg sm:text-xl text-white/90 animate-in slide-in-from-left duration-700" style={{ animationDelay: '300ms' }}>
                  Solo pago en efectivo
                </p>
              </div>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden animate-in fade-in slide-in-from-bottom-4" style={{ animationDelay: '150ms' }}>
                <div className="h-48 relative overflow-hidden bg-gradient-to-br from-green-50 to-emerald-100">
                  <div className="absolute inset-0 p-4">
                    <div className="absolute top-1/4 left-0 w-full h-1 bg-gray-300"></div>
                    <div className="absolute top-1/2 left-0 w-full h-1 bg-gray-300"></div>
                    <div className="absolute top-3/4 left-0 w-full h-1 bg-gray-300"></div>
                    <div className="absolute left-1/4 top-0 h-full w-1 bg-gray-300"></div>
                    <div className="absolute left-1/2 top-0 h-full w-1 bg-gray-300"></div>
                    <div className="absolute left-3/4 top-0 h-full w-1 bg-gray-300"></div>
                    <div className="absolute top-16 left-12 w-8 h-8 bg-blue-400 rounded"></div>
                    <div className="absolute top-24 right-16 w-6 h-10 bg-gray-400 rounded"></div>
                    <div className="absolute bottom-20 left-20 w-10 h-6 bg-green-400 rounded"></div>
                    <div className="absolute top-12 left-32">
                      <div className="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg"></div>
                      <div className="w-1 h-3 bg-red-500 mx-auto"></div>
                    </div>
                    <div className="absolute bottom-16 right-24">
                      <div className="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg"></div>
                      <div className="w-1 h-3 bg-red-500 mx-auto"></div>
                    </div>
                    <div className="absolute top-20 right-32">
                      <div className="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg"></div>
                      <div className="w-1 h-3 bg-red-500 mx-auto"></div>
                    </div>
                    <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                      <div className="relative">
                        <MapPin className="w-12 h-12 text-red-600 animate-pulse drop-shadow-lg" />
                        <div className="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-2 bg-black/20 rounded-full blur-sm"></div>
                      </div>
                    </div>
                    <div className="absolute top-4 left-4 bg-white px-3 py-1 rounded-full shadow-sm text-xs font-medium text-gray-700">
                      UBEP Bienestar Estudiantil
                    </div>
                  </div>
                </div>
                <div className="p-6">
                  <h3 className="text-lg font-semibold text-gray-800 mb-2">
                    Elige el punto donde quieres que recolectemos tu pedido.
                  </h3>
                  <button className="mt-4 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium">
                    Elegir mi local
                  </button>
                </div>
              </div>
              <div className="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden animate-in fade-in slide-in-from-bottom-4" style={{ animationDelay: '300ms' }}>
                <div className="h-48 relative overflow-hidden bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50">
                  <div className="absolute inset-0 flex items-center justify-center">
                    <div className="relative mr-8">
                      <div className="w-16 h-20 bg-amber-200 rounded-t-full rounded-b-lg transform -rotate-12"></div>
                      <div className="absolute -top-3 left-2 w-3 h-8 bg-amber-200 rounded-full transform -rotate-12"></div>
                      <div className="absolute -top-4 left-5 w-3 h-10 bg-amber-200 rounded-full transform rotate-3"></div>
                      <div className="absolute -top-3 left-8 w-3 h-9 bg-amber-200 rounded-full transform rotate-12"></div>
                      <div className="absolute -top-2 left-11 w-3 h-7 bg-amber-200 rounded-full transform rotate-20"></div>
                      <div className="absolute -bottom-6 left-4 w-8 h-8 bg-amber-300 rounded"></div>
                    </div>
                    <div className="relative ml-8">
                      <div className="w-16 h-20 bg-rose-200 rounded-t-full rounded-b-lg transform rotate-12"></div>
                      <div className="absolute -top-3 right-2 w-3 h-8 bg-rose-200 rounded-full transform rotate-12"></div>
                      <div className="absolute -top-4 right-5 w-3 h-10 bg-rose-200 rounded-full transform -rotate-3"></div>
                      <div className="absolute -top-3 right-8 w-3 h-9 bg-rose-200 rounded-full transform -rotate-12"></div>
                      <div className="absolute -top-2 right-11 w-3 h-7 bg-rose-200 rounded-full transform -rotate-20"></div>
                      <div className="absolute -bottom-6 right-4 w-8 h-8 bg-rose-300 rounded"></div>
                    </div>
                    <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                      <Hand className="w-8 h-8 text-purple-400 opacity-50 animate-pulse" />
                    </div>
                  </div>
                  <div className="absolute top-8 left-8 w-2 h-2 bg-yellow-400 rounded-full animate-bounce"></div>
                  <div className="absolute top-12 right-12 w-2 h-2 bg-pink-400 rounded-full animate-bounce" style={{ animationDelay: '75ms' }}></div>
                  <div className="absolute bottom-12 left-16 w-2 h-2 bg-blue-400 rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                </div>
                <div className="p-6">
                  <h3 className="text-lg font-semibold text-gray-800 mb-2">
                    Pide favores para mejorar tu comodidad.
                  </h3>
                  <button
                    onClick={() => setCurrentView("newFavor")}
                    className="mt-4 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium"
                  >
                    Pedir favor
                  </button>
                </div>
              </div>
              
              <div className="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden animate-in fade-in slide-in-from-bottom-4" style={{ animationDelay: '500ms' }}>
                <div className="h-48 bg-gradient-to-br from-orange-50 to-orange-100 flex items-center justify-center">
                  <UserPlus className="w-32 h-32 text-orange-500" />
                </div>
                <div className="p-6">
                  <h3 className="text-lg font-semibold text-gray-800 mb-2">
                    nete como repartidor
                  </h3>
                  <p className="text-sm text-gray-600 mb-4">
                    Genera ingresos en tu tiempo libre. S茅 tu propio jefe y conectate para repartir cuando y c贸mo quieras.
                  </p>
                  <button className="mt-2 px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium">
                    Quiero trabajar
                  </button>
                </div>
              </div>
              
            </div>
          </main>
        </div>
      );
    }

    // --- Montar la aplicaci贸n React en el DOM ---
    
    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<HomePage />);
    
  </script>

</body>
</html>